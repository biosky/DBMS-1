CREATE DATABASE StudentDDB;
USE StudentDB;

CREATE TABLE Student (
  student_id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  age INT CHECK (age > 0),
  city VARCHAR(50),
  marks INT DEFAULT 0
);

CREATE TABLE Course (
  course_id INT PRIMARY KEY,
  course_name VARCHAR(50),
  duration INT
);

CREATE TABLE Enrollment (
  enroll_id INT PRIMARY KEY,
  student_id INT,
  course_id INT,
  FOREIGN KEY (student_id) REFERENCES Student(student_id),
  FOREIGN KEY (course_id) REFERENCES Course(course_id)
);

CREATE INDEX idx_city ON Student(city);

CREATE VIEW student_info AS
SELECT name, city, marks
FROM Student
WHERE marks > 50;

INSERT INTO Student (name, age, city, marks) VALUES ('Teju', 20, 'Pune', 85);
INSERT INTO Student (name, age, city, marks) VALUES ('Madhav', 22, 'Mumbai', 90);
INSERT INTO Student (name, age, city, marks) VALUES ('Anku', 21, 'Nashik', 70);
INSERT INTO Student (name, age, city, marks) VALUES ('Riya', 23, 'Nagpur', 60);

INSERT INTO Course VALUES (101, 'DBMS', 6);
INSERT INTO Course VALUES (102, 'OOPS', 5);
INSERT INTO Course VALUES (103, 'CN', 4);

INSERT INTO Enrollment VALUES (1, 1, 101);
INSERT INTO Enrollment VALUES (2, 2, 102);
INSERT INTO Enrollment VALUES (3, 3, 103);

SELECT * FROM Student;
SELECT name, marks FROM Student WHERE marks > 80;
UPDATE Student SET marks = 95 WHERE student_id = 2;
DELETE FROM Student WHERE student_id = 4;
SELECT AVG(marks) AS AverageMarks FROM Student;
SELECT * FROM Student ORDER BY marks DESC;
SELECT * FROM Student WHERE name LIKE 'T%' OR marks BETWEEN 70 AND 90;
SELECT city FROM Student UNION SELECT course_name FROM Course;
